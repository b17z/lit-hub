<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta name="generator" content="Hugo 0.50" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> Full Node Setup: Rasperry Pi 3 B/B&#43; </title>

  
  <meta name="description" content="Up and Running on the Raspberry Pi 3"> 
  
  
  
  
  

  

  <meta name="author" content="Vertcoin Documentation">


  <meta property="og:title" content="Full Node Setup: Rasperry Pi 3 B/B&#43;" />
<meta property="og:description" content="Up and Running on the Raspberry Pi 3" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/raspberry-pi/" /><meta property="article:published_time" content="2018-05-04T12:46:25-05:00"/>
<meta property="article:modified_time" content="2018-05-04T12:46:25-05:00"/>

  




  
  
  
  
  

  <link rel="canonical" href="/docs/raspberry-pi/">  

  <link rel="shortcut icon" type="image/png" href="">


  <link href="/css/font.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.min.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.legenda.css" rel="stylesheet" type="text/css">
  <link href="/css/highlight.css" rel="stylesheet" type="text/css">
  <link href="/css/master.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.demo.css" rel="stylesheet" type="text/css">

 <link href="/css/custom.css" rel="stylesheet" type="text/css">

  <script src="/js/jquery-2.1.4.min.js" type="text/javascript">
  </script>

  <script type="text/javascript" src="/js/tocbot.min.js"></script>
</head>


<body class="page-kube">
  <header> <div class="show-sm">
    <div id="nav-toggle-box">
      <div id="nav-toggle-brand">
        <a href="/"></a>
      </div><a data-component="toggleme" data-target="#top" href="#" id="nav-toggle"><i class="kube-menu"></i></a>
    </div>
  </div>
  <div class="hide-sm" id="top">
    <div id="top-brand">
      <a href="/" title="home"></a>
    </div>
    <nav id="top-nav-main">
      <ul>
       
       
    <li><a href="/" >Home</a></li>
    
    <li><a href="https://vertcoin.org" >Main Site</a></li>
    
    <li><a href="/docs/" >Documentation</a></li>
    
    <li><a href="/academy/" >Vertcoin Academy</a></li>
    
      </ul>
    </nav>
    <nav id="top-nav-extra"> 
      <ul>
          
      </ul>
    </nav>
  </div>
 </header>
  <main>
  <div id="main">
    <div id="hero">
      <h1> Full Node Setup: Rasperry Pi 3 B/B&#43; </h1>
      <p class="hero-lead">
           Guide in Setting Up a Full Node on the Raspberry Pi 3.
      </p>

    </div> 
    <div id="kube-component" class="content">
    
<nav id="contents">
    <ol class="js-toc">
    </ol>
</nav>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded",
function(){
tocbot.init({

tocSelector: '.js-toc',

contentSelector: '.content',

headingSelector: 'h3'
})
}
);
</script>



    

<h3 id="raspberry-pi-3-b-b-vertcoin-full-node-installation-done-using-windows">Raspberry Pi 3 B/B+ Vertcoin full node installation done using Windows</h3>

<p align="center">
  <img src="https://i.imgur.com/eJyg30C.png" width="343" height="68" />
</p>
<p align="center">
  <img src="https://i.imgur.com/zgx4uiu.jpg">
</p>

<h3 id="why-a-vertcoin-full-node">Why a Vertcoin Full node?</h3>

<blockquote>
<p>Vertcoin is a digital currency supported by a peer-to-peer network. In order to run efficiently and effectively, it needs peers run by different people&hellip; and the more the better. [1]</p>

<p>This tutorial will describe how to create a Vertcoin “full node” (a Vertcoin server that contains the full blockchain and propagates transactions throughout the Vertcoin network via peers). This system will not mine for Vertcoins&hellip; it will play its part to keep the Vertcoin peer-to-peer network healthy and strong. For a detailed explanation for why it is important to have a healthy Vertcoin peer-to-peer network, read this <a href="https://medium.com/@lopp/bitcoin-nodes-how-many-is-enough-9b8e8f6fd2cf">article</a> about Bitcoin full nodes. [2]</p>
</blockquote>

<p><code>NOTE:</code> This will be a “headless” server&hellip; meaning we will not be using a GUI to configure Vertcoin or check to see how things are running. In fact, once the server is set up, you will only interact with it using command line calls over <code>SSH</code>. The idea is to have this full node be simple, low-power, with optimized memory usage and something that “just runs” in your basement, closet, etc.</p>

<h3 id="why-a-raspberry-pi">Why a Raspberry Pi?</h3>

<blockquote>
<p>Raspberry Pi is an inexpensive computing hardware platform that generates little heat, draws little power, and can run silently 24 hours a day without having to think about it. [1]</p>
</blockquote>

<h4 id="index">Index</h4>

<ol>
<li><code>Parts List</code></li>
<li><code>Download and Sync Vertcoin Core QT *</code></li>
<li><code>Install Raspbian Stretch Lite</code></li>
<li><code>Initial Setup of Raspberry Pi</code></li>
<li><code>Format USB Flash Drive and Configure Auto-Mount</code></li>
<li><code>Transfer Blockchain to USB Flash Drive, Create vertcoin.conf &amp; Soft Link to USB Flash Drive</code></li>
<li><code>Create Swap File space for Raspberry Pi &amp; Start Syncing</code></li>
<li><code>Configure firewall to allow Vertcoin Core traffic</code><br /></li>
<li><code>Congratulations! Thanks for doing your part and running a Vertcoin full node &lt;3</code></li>
</ol>

<p><code>*OPTIONAL Setup p2pool-vtc</code><br />
<code>**EXPERIMENTAL Setup Unitus Full Node for merged mining with p2pool-vtc</code></p>

<hr />

<h3 id="1-parts-list">1.) Parts List</h3>

<table>
<thead>
<tr>
<th>Parts</th>
<th>Price</th>
<th>Link</th>
</tr>
</thead>

<tbody>
<tr>
<td>CanaKit Raspberry Pi 3 B+</td>
<td>$49.99 USD</td>
<td><a href="https://www.amazon.com/CanaKit-Raspberry-Power-Supply-Listed/dp/B07BC6WH7V/">https://www.amazon.com/CanaKit-Raspberry-Power-Supply-Listed/dp/B07BC6WH7V/</a></td>
</tr>

<tr>
<td>Samsung 32GB 95MB/s (U1) MicroSD EVO Select Memory Card</td>
<td>$12.99 USD</td>
<td><a href="https://www.amazon.com/Samsung-MicroSD-Adapter-MB-ME32GA-AM/dp/B06XWN9Q99/">https://www.amazon.com/Samsung-MicroSD-Adapter-MB-ME32GA-AM/dp/B06XWN9Q99/</a></td>
</tr>

<tr>
<td>SanDisk Ultra Fit 128GB USB 3.0 Flash Drive</td>
<td>$27.49 USD</td>
<td><a href="https://www.amazon.com/SanDisk-Ultra-128GB-Flash-Drive/dp/B01BGTG2A0/">https://www.amazon.com/SanDisk-Ultra-128GB-Flash-Drive/dp/B01BGTG2A0/</a></td>
</tr>

<tr>
<td>Transcend USB 3.0 SDHC / SDXC / microSDHC / SDXC Card Reader</td>
<td>$9.23 USD</td>
<td><a href="https://www.amazon.com/Transcend-microSDHC-Reader-TS-RDF5K-Black/dp/B009D79VH4/">https://www.amazon.com/Transcend-microSDHC-Reader-TS-RDF5K-Black/dp/B009D79VH4/</a></td>
</tr>

<tr>
<td>*OPTIONAL: Zebra Black Ice Case for Raspberry Pi by C4Labs</td>
<td>$14.95 USD</td>
<td><a href="https://www.amazon.com/Zebra-Black-Case-Raspberry-C4labs/dp/B00M6G9YBM/">https://www.amazon.com/Zebra-Black-Case-Raspberry-C4labs/dp/B00M6G9YBM/</a></td>
</tr>
</tbody>
</table>

<p>You may change the USB Flash Drive to match your preference. I <code>highly recommend</code> that a USB Flash Drive (16GB - 128GB) or an External Hard Drive is paired with the Raspberry Pi.</p>

<p>The case in the parts list is a personal preference, it is your choice how you wish to protect your Raspberry Pi. The Zebra Black Ice case was chosen for it&rsquo;s cut out on the bottom of the case, allowing for the placement of a heatsink on the <code>RAM</code> of the Raspberry Pi.</p>

<hr />

<h3 id="2-download-and-sync-vertcoin-core-qt">2.) Download and sync Vertcoin Core QT</h3>

<p>This step is <code>optional</code> but recommended. <a href="https://github.com/vertcoin-project/vertcoin-core/releases">Download</a> the latest stable release of Vertcoin Core and launch <code>vertcoin-qt.exe</code> to begin the syncing process. I use my desktop PC to sync the blockchain first because it has better specs than a $35 Raspberry Pi. The PC will sync headers, download blocks and verify blocks faster than the Raspberry Pi can.</p>

<p>We will use this copy of the blockchain that is syncing to side-load onto our Raspberry Pi later.</p>

<p><code>Vertcoin Core Download Link: https://github.com/vertcoin-project/vertcoin-core/releases</code><br />
<code>Default Windows Directory (Vertcoin): C:\Users\%USER%\AppData\Roaming\Vertcoin</code></p>

<p><code>NOTE:</code> Setting up merged mining with <code>Unitus</code> has proven to be an unstable experience so far, this section is experimental and is only for those who wish to experiment with their Raspberry Pi and are comfortable with troubleshooting their node and possibly breaking their node.</p>

<p>If you intend on merge mining with <code>Unitus</code>, consider syncing <code>Unitus Core</code> now as well.</p>

<p><code>Unitus Core Download Link: https://github.com/unitusdev/unitus/releases</code><br />
<code>Default Windows Directory (Unitus): C:\Users\%USERS%\AppData\Roaming\Unitus</code></p>

<hr />

<h3 id="3-install-raspbian-stretch-lite">3.) Install Raspbian Stretch Lite</h3>

<blockquote>
<p>Raspbian is a free operating system based on Debian, optimised for the Raspberry Pi hardware. Raspbian comes with over 35,000 packages: precompiled software bundled in a nice format for easy installation on your Raspberry Pi.</p>

<p><code>https://www.raspberrypi.org/documentation/raspbian/</code></p>
</blockquote>

<p>I recommend downloading the latest stable version of <a href="https://www.raspberrypi.org/downloads/raspbian/">Raspbian Stretch Lite</a>.</p>

<p>We will utilize the software &lsquo;Win32 Disk Imager&rsquo; to format and install Raspbian on the MicroSD card. Please follow the <a href="https://www.raspberrypi.org/documentation/installation/installing-images/windows.md">guide</a> below for details on installing the Rasbian image to the MicroSD card.</p>

<p><img src="https://i.imgur.com/fTyqpat.png" alt="Write" /><br />
<img src="https://i.imgur.com/DrGi0mb.png" alt="Writing..." /><br />
<img src="https://i.imgur.com/cfUjvKR.png" alt="Done" /></p>

<p><code>Raspberry Pi - Installing Operating System Images Using Windows: https://www.raspberrypi.org/documentation/installation/installing-images/windows.md</code></p>

<p>Once Win32 Disk Imager is finished writing to the MicroSD card please access the &lsquo;boot&rsquo; partition of the MicroSD card with Windows Explorer <code>Win+E</code>. Create a new empty text file named <code>ssh</code> like so&hellip;</p>

<p><img src="https://i.imgur.com/m14rGdV.png" alt="MicroSD card - ssh" /><br />
This enables <code>SSH</code> access on the Raspberry Pi&rsquo;s first boot sequence. Please safely remove the USB Card Reader / MicroSD card as to ensure the data is not corrupted.</p>

<p><code>Raspian Download Link: https://www.raspberrypi.org/downloads/raspbian/</code></p>

<p><code>Win32 Disk Imager Documentation: https://www.raspberrypi.org/documentation/installation/installing-images/windows.md</code></p>

<hr />

<h3 id="4-initial-setup-of-raspberry-pi">4.) Initial Setup of Raspberry Pi</h3>

<p>Insert the MicroSD card that was safely removed into the slot located on the bottom of the Raspberry Pi. Connect an Ethernet cable to the Raspberry Pi that has internet access. When you are ready to power on the Pi, plug the power supply in and the Raspberry Pi will immediately begin to boot.</p>

<p>We will access our Raspberry Pi through an <code>SSH</code> session on our Windows PC. I like to use <code>Git Bash</code> which is included in the Windows <a href="https://git-scm.com/downloads">download</a> of <code>Git</code>.</p>

<p><code>Git download link: https://git-scm.com/downloads</code></p>

<p>Open a web browser page and navigate to your router page and identify the <code>IP</code> address of the freshly powered on Raspberry Pi. In my case the <code>IP</code> address is <code>192.168.1.2</code>, please make note of your Raspberry Pi&rsquo;s <code>IP</code> address as we will need to use it to login via <code>SSH</code>.</p>

<p># Open <code>Git Bash</code> and &hellip;<br />
<code>~ $ ssh 192.168.1.2 -l pi</code></p>

<p><code>default password: raspberry</code></p>

<p># Download and install latest system updates<br />
<code>pi@raspberrypi:~ $ sudo apt-get update ; sudo apt-get upgrade -y</code></p>

<p># Remove orphaned packages and clean <code>apt</code><br />
<code>pi@raspberrypi:~ $ sudo apt-get autoremove ; sudo apt-get autoclean</code></p>

<p># Download and install useful software packages<br />
<code>pi@raspberrypi:~ $ sudo apt-get update ; sudo apt-get install git fail2ban</code></p>

<blockquote>
<p><code>Fail2ban</code> is a daemon that can be run on your server to dynamically block clients that fail to authenticate correctly with your services repeatedly. This can help mitigate the affect of brute force attacks and illegitimate users of your services like <code>SSH</code>.</p>

<pre><code>Fail2ban Documentation: https://www.digitalocean.com/community/tutorials/how-fail2ban-works-to-protect-services-on-a-linux-server`
</code></pre>
</blockquote>

<p># Install <code>bitcoin</code> dependencies</p>

<pre><code>Bitcoin Unix Build Notes: https://github.com/bitcoin/bitcoin/blob/master/doc/build-unix.md
</code></pre>

<p><code>pi@raspberrypi:~ $ sudo apt-get install build-essential libtool autotools-dev automake pkg-config libssl-dev libevent-dev bsdmainutils python3 -y</code></p>

<p># Initiate <code>raspi-config</code> script<br />
<code>pi@raspberrypi:~ $ sudo raspi-config</code></p>

<pre><code>1.) [8] Update					# update raspi-config script first
2.) [1] Change User Password	# change password for current user
3.) [4] Localization Options	#
	&gt; [I2] Change Timezone		# set your timezone
4.) [7] Advanced Options		#
	&gt; [A1] Expand Filesystem	# expand filesystem 
</code></pre>

<p><code>&lt;Finish&gt;</code> and choose to reboot.</p>

<p># Wait a minute, then log back in via <code>SSH</code><br />
<code>ssh 192.168.1.2 -l pi</code></p>

<p># Change <code>root</code> password<br />
<code>pi@raspberrypi:~ $ sudo passwd root</code></p>

<pre><code># *OPTIONAL: DISABLE WIRELESS &amp; BLUETOOTH
  
# Create our blacklist file  
pi@raspberrypi:~ $ cd /etc/modprobe.d/
pi@raspberrypi:/etc/modprobe.d $ sudo nano raspi-blacklist.conf
   
# disable wireless
blacklist brcmfmac
blacklist brcmutil

# disable bluetooth
blacklist btbcm
blacklist hci_uart
    
ctrl+x to save
    
# Change directories back home    
pi@raspberrypi:/etc/modprobe.d $ cd

# NOTE: Changes will not take effect until after reboot.
</code></pre>

<p># Download latest stable version of vertcoin-core for <code>ARM</code> architecture to Raspberry Pi<br />
<code>pi@raspberrypi:~ $ wget https://github.com/vertcoin-project/vertcoin-core/releases/download/0.13.2/vertcoind-v0.13.2-linux-armhf.zip</code></p>

<p># Unzip <code>vertcoind-v0.13.0-linux-armhf.zip</code></p>

<pre><code>pi@raspberrypi:~ $ unzip vertcoind-v0.13.0-linux-armhf.zip
Archive:  vertcoind-v0.13.0-linux-armhf.zip
  inflating: vertcoin-cli
  inflating: vertcoind
  inflating: vertcoin-tx
</code></pre>

<p># Remove <code>vertcoind-v0.13.0-linux-armhf.zip</code><br />
<code>pi@raspberrypi:~ $ rm *.zip</code></p>

<p># Give privileges to <code>vertcoin</code> binaries<br />
<code>pi@raspberrypi:~ $ chmod +x vertcoin*</code></p>

<p># Move <code>vertcoin-cli</code>, <code>vertcoind</code>, <code>vertcoin-tx</code> to <code>/usr/bin/</code><br />
<code>pi@raspberrypi:~ $ sudo mv vertcoin* /usr/bin/</code></p>

<hr />

<h3 id="5-format-usb-flash-drive-and-configure-auto-mount">5.) Format USB Flash Drive and configure Auto-Mount</h3>

<blockquote>
<p>The Vertcoin blockchain is about 4GB today (4/23/2018) which means that a 16GB USB Flash Drive will have more than enough space to store everything we need, but you can easily future proof with a 128GB USB Flash Drive.</p>
</blockquote>

<p>Insert the USB Flash Drive into your Raspberry Pi.</p>

<p>This USB Flash Drive will contain our Vertcoin data directory as well as our swap space file. We will give the Raspberry Pi some extra memory to work with we will ensure a swap file large enough to handle the memory demand to bootstrap the blockchain.</p>

<p>It is worth mentioning that constantly writing data to the MicroSD card can be damaging, in this guide we will configure the swap file to reside off of the card.</p>

<p>Please insert the USB Flash Drive into the Raspberry Pi. We will format the USB Flash Drive as an <code>ext4</code> filesystem, mount the USB Flash Drive to the Raspberry Pi and configure the device to auto-mount on reboot ensuring the blockchain stays accessible to the <code>Vertcoin</code> daemon after reboots.</p>

<p># Find your USB Flash Drive</p>

<pre><code>pi@raspberrypi:~ $ sudo blkid
/dev/mmcblk0p1: LABEL=&quot;boot&quot; UUID=&quot;5DB0-971B&quot; TYPE=&quot;vfat&quot; PARTUUID=&quot;efbdd15e-01&quot;
/dev/mmcblk0p2: LABEL=&quot;rootfs&quot; UUID=&quot;060b57a8-62bd-4d48-a471-0d28466d1fbb&quot; TYPE=&quot;ext4&quot; PARTUUID=&quot;efbdd15e-02&quot;
/dev/mmcblk0: PTUUID=&quot;efbdd15e&quot; PTTYPE=&quot;dos&quot;
/dev/sda1: UUID=&quot;0DC965316518EB7C&quot; TYPE=&quot;fat32&quot; PARTUUID=&quot;00e3d476-01&quot;
</code></pre>

<p>My USB device appears as <code>/dev/sda1</code> which shows a filesystem type of <code>fat32</code>, your device may be listed differently. Please take note of the <code>/dev/*</code> information that identifies your USB Flash Drive.</p>

<p># Format the USB Flash Drive as <code>ext4</code> filesystem<br />
<code>pi@raspberrypi:~ $ sudo mkfs.ext4 /dev/sda1 -L untitled</code></p>

<pre><code>mke2fs 1.43.4 (31-Jan-2017)
/dev/sda1 contains a fat32 file system
	last mounted on /mnt on Thu Apr 19 22:06:19 2018
Proceed anyway? (y,N) y
Creating filesystem with 732566272 4k blocks and 183148544 inodes
Filesystem UUID: 9f4ea777-a963-49ce-a9f9-37860021d621
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, 
	102400000, 214990848, 512000000, 550731776, 644972544

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (262144 blocks): done
Writing superblocks and filesystem accounting information: done       
</code></pre>

<p># Mount USB Flash Drive to mount point<br />
<code>pi@raspberrypi:~ $ sudo mount /dev/sda1 /mnt</code></p>

<p># Setup <code>fstab</code> file to auto-mount the USB Flash Drive on reboot<br />
<code>pi@raspberrypi:~ $ sudo nano /etc/fstab</code></p>

<pre><code>proc            /proc           proc    defaults          0       0
PARTUUID=efbdd15e-01  /boot           vfat    defaults          0       2
PARTUUID=efbdd15e-02  /               ext4    defaults,noatime  0       1

# replace /dev/sda1 with your USB device, [tab] between each value
/dev/sda1       /mnt    ext4    defaults        0       0

# a swapfile is not a swap partition, no line here
#   use  dphys-swapfile swap[on|off]  for that
</code></pre>

<p><code>ctrl+x</code> to save</p>

<p># Reboot to confirm auto-mount is successful<br />
<code>pi@raspberrypi:~ $ sudo reboot</code></p>

<p># Wait a minute, then log back in via <code>SSH</code><br />
<code>ssh 192.168.1.2 -l pi</code></p>

<p># Confirm USB Flash Drive auto-mounted</p>

<pre><code>pi@raspberrypi:~ $ ls /mnt/
lost+found
</code></pre>

<p># Configure permissions for /mnt/<br />
<code>pi@raspberrypi:~ $ sudo chmod -R 777 /mnt/</code></p>

<p># Create <code>vertcoin</code> directory on USB Flash Drive<br />
<code>pi@raspberrypi:~ $ cd /mnt/ ; mkdir vertcoin</code></p>

<pre><code>pi@raspberrypi:/mnt $ ls
lost+found  vertcoin
</code></pre>

<hr />

<h3 id="6-transfer-blockchain-to-usb-flash-drive-create-vertcoin-conf-soft-link-to-usb-flash-drive">6.) Transfer Blockchain to USB Flash Drive, Create <code>vertcoin.conf</code> &amp; Soft Link to USB Flash Drive</h3>

<blockquote>
<p>WinSCP (Windows Secure Copy) is a free and open-source SFTP, FTP, WebDAV, Amazon S3 and SCP client for Microsoft Windows. Its main function is secure file transfer between a local and a remote computer. Beyond this, WinSCP offers basic file manager and file synchronization functionality. For secure transfers, it uses Secure Shell (SSH) and supports the SCP protocol in addition to SFTP.</p>
</blockquote>

<p>Download and install <code>WinSCP:</code> <code>https://winscp.net/eng/download.php</code></p>

<p>When <code>Vertcoin Core</code> is finished syncing to the blockchain, exit <code>Vertcoin Core</code> so that it safely shuts down ensuring no data is corrupted.</p>

<p>Proceed by running <code>WinSCP</code>, you will be met with a <code>Login</code> prompt asking for a Host name, Port number, User name and Password. Login to your Raspberry Pi like so, please note that your Raspberry Pi&rsquo;s <code>IP</code> address may be different than what is listed below.</p>

<pre><code>File protocol: SFTP
Host name: 192.168.1.2
Port number: 22
User name: pi
Password: yourpasswordhere (default: raspberry)
</code></pre>

<p><img src="https://i.imgur.com/vWmSoWd.png" alt="Login" /><br />
<img src="https://i.imgur.com/SlDMCmN.png" alt="Connection" /></p>

<p>Ensure <code>Optimize connection buffer size</code> is unchecked for an easy tansfer.</p>

<p><code>Default Windows Directory (Vertcoin): C:\Users\%USER%\AppData\Roaming\Vertcoin</code></p>

<p>While logged into your Raspberry Pi, create a new folder named <code>vertcoin</code> on your USB Flash Drive, copy the folders <code>blocks</code> and <code>chainstate</code> to the <code>/mnt/vertcoin</code> folder on your USB Flash Drive. This will allow us to side-load the Vertcoin blockchain and bootstrap faster than if we had the Raspberry Pi do all the work.</p>

<p>Consider transferring the <code>peers.dat</code> file found in Vertcoin&rsquo;s data directory, this can help prevent failing to connect to peers during initial bootstrapping process.</p>

<p><img src="https://i.imgur.com/VC7DpDa.png" alt="Transfer" /></p>

<p>Move back over to your <code>SSH</code> session with your Raspberry Pi&hellip;</p>

<p># Change directory to <code>/mnt/vertcoin</code><br />
<code>pi@raspberrypi:~ $ cd /mnt/vertcoin</code></p>

<p><code>NOTE:</code> If you plan on making your Raspberry Pi just a full node please consider leaving <code>maxconnections</code> set to 40, as the more peers you connect to, the greater amount of peers you can propagate blocks to. The network benefits greatly from peers with many connections. If you plan on setting up a P2Pool the documentation below says to set <code>maxconnections=15</code> in your <code>vertcoin.conf</code> This has been done to minimize the DOA % rate and maximize share efficency on less powerful hardware like the Raspberry Pi.</p>

<pre><code>Raspberry Pi Config: 
# Set database cache size in megabytes; machines sync faster with a larger cache. Recommend 
# setting as high as possible based upon machine's available RAM
dbcache=100
# Keep at most &lt;n&gt; unconnectable transactions in memory
maxorphantx=10
# Keep the transaction memory pool below &lt;n&gt; megabytes
maxmempool=50

Low Bandwidth Usage Config: 
# Maintain at most N connections to peers
maxconnections=20  
# Tries to keep outbound traffic under the given target (in MiB per 24h), 0 = no limit  
maxuploadtarget=500  
</code></pre>

<p># Create <code>vertcoin.conf</code> for Vertcoin Core<br />
<code>pi@raspberrypi:/mnt/vertcoin $ sudo nano vertcoin.conf</code></p>

<pre><code>server=1
rpcuser=vertnode
rpcpassword=yoursecurepasswordgoeshere

# makes client run in background
daemon=1

# https://jlopp.github.io/bitcoin-core-config-generator/ lopp.net optimizations
dbcache=100
maxorphantx=10
maxmempool=50
# leave maxconnections at 40 for full node; 15 for full node + p2pool
maxconnections=40
maxuploadtarget=5000
</code></pre>

<p><code>ctrl+x</code> to save</p>

<hr />

<h4 id="tuning-vertcoind-and-p2pool">Tuning <code>vertcoind</code> and <code>P2Pool</code></h4>

<blockquote>
<p>The more connections, the faster your node is notified of new blocks and avoids wasting work, and the faster it can include transactions with fees in the coinbase, the faster it will propagate a P2Pool block minimizing chances it would become orphan. The less connections, the less bandwidth used and the lower the latency. <code>[4]</code></p>

<p>More than 20 for maxconnections is probably overkill. From my experience (trying various values from 6 to 100) it seems there&rsquo;s not much gain to have past this value (and if you don&rsquo;t have enough WAN bandwidth it can hurt your latencies by queuing transfers between P2Pool nodes during peaks). <code>[4]</code></p>

<p>Note that this may change in the future if the behavior of bitcoind/P2Pool network changes: when in doubt, monitor your interface(s) bandwidth usage and raise this value when most peaks are below your link capacity. <code>[4]</code></p>

<p>If your orphan rate is fine, don&rsquo;t tempt the devil and try tuning maxconnections below 20: you may reduce your income more than you increase it&hellip; <code>[4]</code></p>
</blockquote>

<p>You can do the same by passing parameters to <code>P2Pool</code>:</p>

<pre><code>--max-conns 8 --outgoing-conns 4
</code></pre>

<blockquote>
<p><code>NOTE:</code> Orphans will quickly rise if you have very few connections (they are the means to be notified of other shares after all). I would prefer reducing bitcoind connections before P2Pool&rsquo;s. <code>[4]</code></p>

<p>In my experience you can get as low as 6 total connections (3 in, 3 out) without noticeable efficiency changes. The default values seem overkill (6 outgoing, 40 incoming). The large number of incoming connections (&ndash;max-conns) is designed to help the whole network (some nodes are behind firewalls that don&rsquo;t allow incoming connections). You probably should allow more incoming connections (and check that your network setup allows incoming connections) to do your part in helping the network. <code>[4]</code></p>
</blockquote>

<p><code>PERFORMANCE INFO:</code> Using the above tunings for <code>vertcoind</code> and <code>p2pool-vtc</code> reflects a 1.5% DOA rate over 14 hours of hashing with a GTX 1070 with 114% shares efficiency.</p>

<hr />

<p><code>*OPTIONAL: A quick and easy way to generate a random password is taking the md5sum of a file</code></p>

<pre><code>pi@raspberrypi:/mnt/vertcoin $ touch randomfilename
pi@raspberrypi:/mnt/vertcoin $ md5sum randomfilename
d41d8cd98f00b204e9800998ecf8427e  randomfilename

# Clean up 
pi@raspberrypi:~/.vertcoin $ rm randomfilename
</code></pre>

<p># Change directory back home</p>

<pre><code>pi@raspberrypi:/mnt/vertcoin $ cd
pi@raspberrypi:~ $ pwd
/home/pi
</code></pre>

<p># Create soft link (symbolic link) connecting <code>/mnt/vertcoin/</code> &lt;&mdash;&gt; <code>/home/pi/.vertcoin</code><br />
<code>pi@raspberrypi:~ $ sudo ln -s /mnt/vertcoin/ /home/pi/.vertcoin</code></p>

<p># List all files in home</p>

<pre><code>pi@raspberrypi:~ $ ls -a
.  ..  .bash_history  .bash_logout  .bashrc  .config  .profile  .vertcoin  .wget-hsts
</code></pre>

<p># List files in <code>/home/pi/.vertcoin</code>, confirm blockchain and <code>vertcoin.conf</code> is there</p>

<pre><code>pi@raspberrypi:~ $ ls .vertcoin
blocks  chainstate  vertcoin.conf
</code></pre>

<hr />

<h3 id="7-create-swap-file-space-for-raspberry-pi-start-syncing">7.) Create swap file space for Raspberry Pi &amp; Start Syncing</h3>

<blockquote>
<p>Swap space in Linux is used when the amount of physical memory (RAM) is full. If the system needs more memory resources and the RAM is full, inactive pages in memory are moved to the swap space. While swap space can help machines with a small amount of RAM, it should not be considered a replacement for more RAM. Swap space is located on hard drives, which have a slower access time than physical memory.<br />
<code>https://www.centos.org/docs/5/html/5.2/Deployment_Guide/s1-swap-what-is.html</code></p>
</blockquote>

<p>Ensure that <code>dphys-swapfile</code> is installed and configured to save the swap file in <code>/mnt/swap</code>, allocate <code>1024 MB</code> of swap file space. You can choose a smaller amount of space for a swap file, I would not recommend going lower than <code>300 MB</code>.</p>

<p># Install <code>dphys-swapfile</code></p>

<pre><code>pi@raspberrypi:~ $ sudo apt-get install dphys-swapfile
Reading package lists... Done
Building dependency tree
Reading state information... Done
dphys-swapfile is already the newest version (20100506-3).
0 upgraded, 0 newly installed, 0 to remove and 15 not upgraded.
</code></pre>

<p># Configure swap file<br />
<code>pi@raspberrypi:~ $ sudo nano /etc/dphys-swapfile</code></p>

<pre><code># /etc/dphys-swapfile - user settings for dphys-swapfile package
# author Neil Franklin, last modification 2010.05.05
# copyright ETH Zuerich Physics Departement
#   use under either modified/non-advertising BSD or GPL license
# this file is sourced with . so full normal sh syntax applies
# the default settings are added as commented out CONF_*=* lines

# reconfigure swapfile to reside on /mnt/swap
CONF_SWAPFILE=/mnt/swap

# set size to absolute value, leaving empty (default) then uses computed value
#   you most likely don't want this, unless you have an special disk situation
CONF_SWAPSIZE=1024

# set size to computed value, this times RAM size, dynamically adapts,
#   guarantees that there is enough swap without wasting disk space on excess
#CONF_SWAPFACTOR=2

# restrict size (computed and absolute!) to maximally this limit
#   can be set to empty for no limit, but beware of filled partitions!
#   this is/was a (outdated?) 32bit kernel limit (in MBytes), do not overrun it
#   but is also sensible on 64bit to prevent filling /var or even / partition
#CONF_MAXSWAP=2048
</code></pre>

<p><code>ctrl+x</code> to save</p>

<p># Restart swap file service</p>

<pre><code>pi@raspberrypi:~ $ sudo /etc/init.d/dphys-swapfile stop
[ ok ] Stopping dphys-swapfile (via systemctl): dphys-swapfile.service.
</code></pre>

<pre><code>pi@raspberrypi:~ $ sudo /etc/init.d/dphys-swapfile start
[ ok ] Starting dphys-swapfile (via systemctl): dphys-swapfile.service.
</code></pre>

<h4 id="setup-vertcoin-core-crontab-for-auto-start-on-reboot">Setup Vertcoin Core Crontab for auto-start on reboot</h4>

<p>We will configure the <code>crontab</code> file to start <code>vertcoind</code> on reboot and on each hour to ensure <code>vertcoind</code> always has a process thats alive. If <code>vertcoind</code> is already running when the hourly <code>crontab</code> executes it will simply fail to spawn a new process.</p>

<p># Configure <code>crontab</code> file to start <code>vertcoind</code> hourly and on reboot</p>

<p><code>pi@raspberrypi:~ $ crontab -u pi -e</code></p>

<pre><code>no crontab for pi - using an empty one

Select an editor.  To change later, run 'select-editor'.
  1. /bin/ed
  2. /bin/nano        &lt;---- easiest
  3. /usr/bin/vim.tiny

Choose 1-3 [2]: 2
----------------------------------------------------------------------
# Edit this file to introduce tasks to be run by cron.
#
# Each task to run has to be defined through a single line
# indicating with different fields when the task will be run
# and what command to run for the task
#
# To define the time you can provide concrete values for
# minute (m), hour (h), day of month (dom), month (mon),
# and day of week (dow) or use '*' in these fields (for 'any').#
# Notice that tasks will be started based on the cron's system
# daemon's notion of time and timezones.
#
# Output of the crontab jobs (including errors) is sent through
# email to the user the crontab file belongs to (unless redirected).
#
# For example, you can run a backup of all your user accounts
# at 5 a.m every week with:
# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/
#
# For more information see the manual pages of crontab(5) and cron(8)
#
# m h  dom mon dow   command

@reboot vertcoind

# This is optional, this can cause for an annoying execution of a resource heavy 
# application on load while troubleshooting an issue. Just be mindful that crontab
# is setup this way if you choose to use it. Uncomment line to enable.
#@hourly vertcoind 
</code></pre>

<p><code>ctrl+x</code> to save</p>

<p># <code>NOTE:</code> Make sure the blockchain has fully transferred to <code>/mnt/vertcoin</code> before starting <code>vertcoind</code></p>

<p># Start the <code>vertcoin</code> daemon and begin blockchain sync<br />
<code>pi@raspberrypi:~ $ vertcoind &amp;</code></p>

<pre><code>pi@raspberrypi:~ $ vertcoind &amp;
[1] 837
pi@raspberrypi:~ $ tailf .vertcoin/debug.log 
2018-05-04 23:00:29 Cache configuration:
2018-05-04 23:00:29 * Using 2.0MiB for block index database
2018-05-04 23:00:29 * Using 8.0MiB for chain state database
2018-05-04 23:00:29 * Using 90.0MiB for in-memory UTXO set (plus up to 47.7MiB of unused mempool space)
2018-05-04 23:00:29 init message: Loading block index...
2018-05-04 23:00:29 Opening LevelDB in /home/pi/.vertcoin/blocks/index
2018-05-04 23:00:29 Opened LevelDB successfully
2018-05-04 23:00:29 Using obfuscation key for /home/pi/.vertcoin/blocks/index: 0000000000000000
2018-05-04 23:00:33 Checking PoW for block 720000
2018-05-04 23:00:34 Checking PoW for block 890000
2018-05-04 23:00:44 Checking PoW for block 690000
2018-05-04 23:00:44 Verifying checkpoint at height 430000
2018-05-04 23:00:47 Checking PoW for block 860000
</code></pre>

<h3 id="quick-note-about-blockchain-syncing">Quick note about blockchain syncing</h3>

<pre><code>Vertcoin Core is now synchronizing to the side-loaded blockchain located in `/mnt/` 
(linked to `/home/pi/.vertcoin`). This process can take up to an hour to sync 
headers and verify all of the downloaded blocks. Vertcoin 0.13.0 has shown major
improvements to loading time of the blockchain and can take as little as 
two minutes to fully load.

You can monitor system resources by issuing the htop command and check up on 
vertcoind by issuing the following commands: 

# Display output of Vertcoin debug.log; ctrl+c to stop  
pi@raspberrypi:~ $ tailf .vertcoin/debug.log

# Show blockchain information  
pi@raspberrypi:~ $ vertcoin-cli getblockchaininfo

# Show current block  
pi@raspberrypi:~ $ vertcoin-cli getblockcount  
</code></pre>

<p>You may continue on while <code>vertcoind</code> catches up to the blockchain &hellip;</p>

<hr />

<h3 id="8-configure-firewall-to-allow-vertcoin-core-traffic">8.) Configure firewall to allow Vertcoin Core traffic</h3>

<p>Please note that your <code>IP</code> range may be different than what I have listed below. If your router <code>IP</code> address is <code>192.168.1.1</code> then the instructions above require no alterations. If your <code>IP</code> address is something like <code>192.168.56.1</code> or <code>10.0.0.1</code> then you will need to modify the &lsquo;ufw allow from <code>192.168.1.0/24</code> to any port 22&rsquo; to &lsquo;ufw allow from <code>192.168.56.0/24</code>(&hellip;)&rsquo; or &lsquo;ufw allow from <code>10.0.0.0/24</code>(&hellip;)&rsquo; respectively.</p>

<p># Install <code>UFW</code><br />
<code>pi@raspberrypi:~ $ sudo apt-get install ufw</code></p>

<p># Escalate to <code>root</code> and configure <code>UFW</code></p>

<p><code>pi@raspberrypi:~ $ sudo su</code><br />
<code>root@raspberrypi:/home/pi# ufw default deny incoming</code></p>

<pre><code>Default incoming policy changed to 'deny'
(be sure to update your rules accordingly)
</code></pre>

<p><code>root@raspberrypi:/home/pi# ufw default allow outgoing</code></p>

<pre><code>Default outgoing policy changed to 'allow'
(be sure to update your rules accordingly)
</code></pre>

<p><code>root@raspberrypi:/home/pi# ufw allow from 192.168.1.0/24 to any port 22 comment 'allow SSH from local LAN'</code><br />
<code>root@raspberrypi:/home/pi# ufw allow 5889 comment 'allow vertcoin core'</code><br />
<code>root@raspberrypi:/home/pi# ufw enable</code></p>

<pre><code>Command may disrupt existing ssh connections. Proceed with operation (y|n)? y
Firewall is active and enabled on system startup
</code></pre>

<p><code>root@raspberrypi:/home/pi# systemctl enable ufw</code></p>

<pre><code>Synchronizing state of ufw.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable ufw
</code></pre>

<p><code>root@raspberrypi:/home/pi# ufw status</code></p>

<pre><code>Status: active

To                         Action      From
--                         ------      ----
22                         ALLOW       192.168.1.0/24             # allow SSH from local LAN
5889                       ALLOW       Anywhere                   # allow vertcoin core
5889 (v6)                  ALLOW       Anywhere (v6)              # allow vertcoin core
</code></pre>

<p># Give up <code>root</code><br />
<code>root@raspberrypi:/home/pi# exit</code></p>

<p>Open a browser window and navigate to your router page, from there you can port forward your Raspberry Pi.<br />
<code>TCP/UDP Port: 5889</code></p>

<h4 id="this-will-make-your-node-public-supporting-the-health-of-the-vertcoin-network-by-keeping-it-decentralized-and-populated-with-one-more-node">This will make your node public, supporting the health of the Vertcoin network by keeping it decentralized and populated with one more node.</h4>

<hr />

<h3 id="9-congratulations-thanks-for-doing-your-part-and-running-a-vertcoin-full-node-3">9.) Congratulations! Thanks for doing your part and running a Vertcoin full node &lt;3</h3>

<p>You have successfully setup a full Vertcoin Core node on a Raspberry Pi. Thank you for following along and contributing to the Vertcoin network by helping keep it populated with nodes and distributed. You help give meaning to the people&rsquo;s coin!</p>

<pre><code>pi@raspberrypi:~ $ vertcoin-cli getblockchaininfo
{
  &quot;chain&quot;: &quot;main&quot;,
  &quot;blocks&quot;: 919881,
  &quot;headers&quot;: 919881,
  &quot;bestblockhash&quot;: &quot;846ae520eebe3ecfc33c0bc427ab1414e9f45010623e00f9a7e24697d5a3fa12&quot;,
  &quot;difficulty&quot;: 39708.0468186609,
  &quot;mediantime&quot;: 1525044381,
  &quot;verificationprogress&quot;: 0.9999867830498936,
  &quot;initialblockdownload&quot;: false,
  &quot;chainwork&quot;: &quot;000000000000000000000000000000000000000000000001b087526cfafa4e4a&quot;,
  &quot;size_on_disk&quot;: 3459943082,
  &quot;pruned&quot;: false,
  &quot;bip9_softforks&quot;: {
    &quot;csv&quot;: {
      &quot;status&quot;: &quot;active&quot;,
      &quot;startTime&quot;: 1488326400,
      &quot;timeout&quot;: 1519862400,
      &quot;since&quot;: 691488
    },
    &quot;segwit&quot;: {
      &quot;status&quot;: &quot;active&quot;,
      &quot;startTime&quot;: 1488326400,
      &quot;timeout&quot;: 1519862400,
      &quot;since&quot;: 713664
    },
    &quot;nversionbips&quot;: {
      &quot;status&quot;: &quot;active&quot;,
      &quot;startTime&quot;: 1488326400,
      &quot;timeout&quot;: 1519862400,
      &quot;since&quot;: 691488
    }
  },
  &quot;warnings&quot;: &quot;&quot;
}
pi@raspberrypi:~ $ vertcoin-cli getconnectioncount
14
</code></pre>

<hr />

<h3 id="optional-setup-p2pool-vtc"><code>*OPTIONAL</code> Setup p2pool-vtc</h3>

<blockquote>
<p>P2Pool is a decentralized Bitcoin mining pool that works by creating a peer-to-peer network of miner nodes.</p>

<p>P2Pool creates a new block chain in which the difficulty is adjusted so a new block is found every 30 seconds. The blocks that get into the P2Pool block chain (called the &ldquo;share chain&rdquo;) are the same blocks that would get into the Bitcoin block chain, only they have a lower difficulty target. Whenever a peer announces a new share found (new block in the P2Pool block chain), it is received by the other peers, and the other peers verify that this block contains payouts for all the previous miners who found a share (and announced it) that made it into the P2Pool share chain. This continues until some peer finds a block that has a difficulty that meets the Bitcoin network&rsquo;s difficulty target. This peer announces this block to the Bitcoin network and miners who have submitted shares for this block are paid in the generation transaction, proportionally to how many shares they have found in the last while. - Unknown author [3]</p>

<p>Decentralized payout pooling solves the problem of centralized mining pools degrading the decentralization of Bitcoin and avoids the risk of hard to detect theft by pool operators.</p>

<p>Miners are configured to connect to a P2Pool node that can be run locally, alongside the miner. P2Pool users must run a full Bitcoin node which serves the purpose of independently validating transactions and the Bitcoin blockchain.</p>

<p>P2Pool nodes work on a chain of shares similar to Bitcoin&rsquo;s blockchain. Each node works on a block that includes payouts to the previous shares&rsquo; owners and the node itself, which can also result in a share if it meets P2Pool&rsquo;s difficulty.</p>
</blockquote>

<p># Reasons to use P2Pool as your mining pool <code>[4]</code></p>

<pre><code>1. You are in charge
2. No single point of failure in the pool
3. It's fun for geeks to learn
4. There are small statistical advantages increasing income vs traditional pools
</code></pre>

<p># Reasons to avoid P2Pool <code>[4]</code></p>

<pre><code>1. You need to maintain your own node (expect some sysadmin work)
2. Some hardware simply can't perform well on P2Pool
3. You have to provide the CPU/RAM/Disk/Net capacity P2Pool needs
</code></pre>

<p># P2pool&rsquo;s advantages for miners looking for better incomes <code>[4]</code></p>

<pre><code>Fees are optional and transactions are paid to miners. On average, if your miners 
have latencies comparable to the other miners on P2Pool, you should have more 
income on P2Pool than on any other pool. In fact you should expect as much 
(or more, see point below) income as you would have solo mining with reduced 
variance thanks to other P2Pool miners contributing their own hashrate.

P2Pool blocks are quickly broadcasted to the Vertcoin network through all the 
vertcoind nodes used by the whole P2Pool network. If another pool finds a block 
at the same time than P2Pool, it probably is at a disadvantage: that's more income 
for P2Pool on average.
</code></pre>

<p># Security <code>[4]</code></p>

<pre><code>Don't use the node's wallet, always configure p2pool to pay an address 
(use the &quot;-a&quot; parameter) you can secure appropriately. Big fat wallets on a public 
server are not a good idea.
</code></pre>

<hr />

<h4 id="tuning-vertcoind-and-p2pool-1">Tuning <code>vertcoind</code> and <code>P2Pool</code></h4>

<blockquote>
<p>The more connections, the faster your node is notified of new blocks and avoids wasting work, and the faster it can include transactions with fees in the coinbase, the faster it will propagate a P2Pool block minimizing chances it would become orphan. The less connections, the less bandwidth used and the lower the latency. <code>[4]</code></p>

<p>More than 20 for maxconnections is probably overkill. From my experience (trying various values from 6 to 100) it seems there&rsquo;s not much gain to have past this value (and if you don&rsquo;t have enough WAN bandwidth it can hurt your latencies by queuing transfers between P2Pool nodes during peaks). <code>[4]</code></p>

<p>Note that this may change in the future if the behavior of bitcoind/P2Pool network changes: when in doubt, monitor your interface(s) bandwidth usage and raise this value when most peaks are below your link capacity. <code>[4]</code></p>

<p>If your orphan rate is fine, don&rsquo;t tempt the devil and try tuning maxconnections below 20: you may reduce your income more than you increase it&hellip; <code>[4]</code></p>
</blockquote>

<p>You can do the same by passing parameters to <code>P2Pool</code>:</p>

<pre><code>--max-conns 8 --outgoing-conns 4
</code></pre>

<blockquote>
<p><code>NOTE:</code> Orphans will quickly rise if you have very few connections (they are the means to be notified of other shares after all). I would prefer reducing bitcoind connections before P2Pool&rsquo;s. <code>[4]</code></p>

<p>In my experience you can get as low as 6 total connections (3 in, 3 out) without noticeable efficiency changes. The default values seem overkill (6 outgoing, 40 incoming). The large number of incoming connections (&ndash;max-conns) is designed to help the whole network (some nodes are behind firewalls that don&rsquo;t allow incoming connections). You probably should allow more incoming connections (and check that your network setup allows incoming connections) to do your part in helping the network. <code>[4]</code></p>
</blockquote>

<p><code>PERFORMANCE INFO:</code> Using the above tunings for <code>vertcoind</code> and <code>p2pool-vtc</code> reflects a 1.6% DOA rate over 47 hours of hashing with a GTX 1070 with 103% shares efficiency, 17 shares total with 1 orphaned share.</p>

<h2 id="poolperformance-https-i-imgur-com-ekxpa0y-png"><img src="https://i.imgur.com/Ekxpa0Y.png" alt="PoolPerformance" /></h2>

<p><code>p2pool-vtc Documentation: https://github.com/vertcoin-project/p2pool-vtc</code></p>

<p># Install <code>p2pool-vtc</code> dependencies and <code>python-pip</code></p>

<p><code>pi@raspberrypi:~ $ sudo apt-get install python-rrdtool python-pygame python-scipy python-twisted python-twisted-web python-imaging python-pip -y</code></p>

<p># Install <code>bitcoin</code> dependencies and <code>libffi-dev</code></p>

<p><code>pi@raspberrypi:~ $ sudo apt-get install build-essential libtool autotools-dev automake pkg-config libffi-dev libssl-dev libevent-dev bsdmainutils python3 -y</code></p>

<p># Grab latest <code>p2pool-vtc</code> release</p>

<pre><code>pi@raspberrypi:~ $ wget &quot;https://github.com/vertcoin-project/p2pool-vtc/archive/v0.3.0-rc1.zip&quot;  
</code></pre>

<p># Unzip <code>p2pool-vtc</code> release
<code>pi@raspberrypi:~ $ unzip v0.3.0-rc1.zip</code></p>

<p># Change directory to <code>p2pool-vtc-0.3.0-rc1</code></p>

<pre><code class="language-pi@raspberrypi:~">
\# Install `requirements.txt` dependencies  
`pi@raspberrypi:~/p2pool-vtc-0.3.0-rc1 $ pip install -r requirements.txt`   
</code></pre>

<p>Collecting Twisted&gt;=12.2.0 (from -r requirements.txt (line 1))
  Downloading <a href="https://files.pythonhosted.org/packages/12/2a/e9e4fb2e6b2f7a75577e0614926819a472934b0b85f205ba5d5d2add54d0/Twisted-18.4.0.tar.bz2">https://files.pythonhosted.org/packages/12/2a/e9e4fb2e6b2f7a75577e0614926819a472934b0b85f205ba5d5d2add54d0/Twisted-18.4.0.tar.bz2</a> (3.0MB)
    100% |████████████████████████████████| 3.0MB 98kB/s
Collecting argparse&gt;=1.2.1 (from -r requirements.txt (line 2))
  Downloading <a href="https://files.pythonhosted.org/packages/f2/94/3af39d34be01a24a6e65433d19e107099374224905f1e0cc6bbe1fd22a2f/argparse-1.4.0-py2.py3-none-any.whl">https://files.pythonhosted.org/packages/f2/94/3af39d34be01a24a6e65433d19e107099374224905f1e0cc6bbe1fd22a2f/argparse-1.4.0-py2.py3-none-any.whl</a>
Collecting pyOpenSSL&gt;=0.13 (from -r requirements.txt (line 3))
  Downloading <a href="https://files.pythonhosted.org/packages/79/db/7c0cfe4aa8341a5fab4638952520d8db6ab85ff84505e12c00ea311c3516/pyOpenSSL-17.5.0-py2.py3-none-any.whl">https://files.pythonhosted.org/packages/79/db/7c0cfe4aa8341a5fab4638952520d8db6ab85ff84505e12c00ea311c3516/pyOpenSSL-17.5.0-py2.py3-none-any.whl</a> (53kB)
    100% |████████████████████████████████| 61kB 2.2MB/s
Collecting Automat&gt;=0.3.0 (from Twisted&gt;=12.2.0-&gt;-r requirements.txt (line 1))
  Downloading <a href="https://files.pythonhosted.org/packages/17/6a/1baf488c2015ecafda48c03ca984cf0c48c254622668eb1732dbe2eae118/Automat-0.6.0-py2.py3-none-any.whl">https://files.pythonhosted.org/packages/17/6a/1baf488c2015ecafda48c03ca984cf0c48c254622668eb1732dbe2eae118/Automat-0.6.0-py2.py3-none-any.whl</a></p>

<pre><code>
\# Install P2Pool   
`pi@raspberrypi:~/p2pool-vtc-0.3.0-rc1 $ sudo python setup.py install`  

\# Download alternate  web frontend for P2Pool  
`pi@raspberrypi:~/p2pool-vtc-0.3.0-rc1 $ cd`  
`pi@raspberrypi:~ $ git clone https://github.com/hardcpp/P2PoolExtendedFrontEnd.git`  
`pi@raspberrypi:~ $ cd P2PoolExtendedFrontEnd`  

\# Move all files in `P2PoolExtendedFrontEnd` to the `web-static` folder in `p2pool-vtc`  
`pi@raspberrypi:~/P2PoolExtendedFrontEnd $ mv * /home/pi/p2pool-vtc-0.3.0-rc1/web-static/`  
`pi@raspberrypi:~/P2PoolExtendedFrontEnd $ cd`  

\# Clean up  
`pi@raspberrypi:~ $ sudo rm -r P2PoolExtendedFrontEnd/`


#### Network 1 - Firewall Configuration  
&gt; If you are a smaller miner with 2 graphics cards or less or are using your CPU, it is recommended to use Network 2. If you are a larger miner with multiple cards and/or a hash rate larger than 100Mh, it is recommended to use Network 1.

\# Escalate to `root`  
`pi@raspberrypi:~ $ sudo su`  
`root@raspberrypi:/home/pi# ufw allow 9346 comment 'allow --network 1 p2p port'`  
`root@raspberrypi:/home/pi# ufw allow 9171 comment 'allow --network 1 mining port'`  

\# Give up `root`  
`root@raspberrypi:/home/pi# exit`

#### Network 2 - Firewall Configuration  
&gt; If you are a smaller miner with 2 graphics cards or less or are using your CPU, it is recommended to use Network 2. If you are a larger miner with multiple cards and/or a hash rate larger than 100Mh, it is recommended to use Network 1.

\# Escalate to `root`  
`pi@raspberrypi:~ $ sudo su`  
`root@raspberrypi:/home/pi# ufw allow 9347 comment 'allow --network 2 p2p port'`  
`root@raspberrypi:/home/pi# ufw allow 9181 comment 'allow --network 2 mining port'`  

\# Give up `root`  
`root@raspberrypi:/home/pi# exit`  

#### Setup P2Pool bash script for execution on reboot  
`pi@raspberrypi:~ $ nano start-p2pool.sh`  
</code></pre>

<pre><code>#!/bin/bash
#
# run p2pool with pre-configured settings
#
# network 1 = --net vertcoin
# network 2 = --net vertcoin2
#
cd p2pool-vtc
python run_p2pool.py --net vertcoin2 -a yourlegacyvertcoinaddressgoeshere --max-conns 8 --outgoing-conns 4

# !!! * EXPIRMENTAL NOTE: If you want to allow for merged mining please replace python run_p2pool.py --net vertcoin with...
# python run_p2pool.py --net vertcoin -a yourvertcoinaddressgoeshere --merged http://unitusnode:yourreallysecureRPCpasswordhere@127.0.0.1:6699
</code></pre>

<p># Give execute privileges to <code>start-p2pool.sh</code><br />
<code>pi@raspberrypi:~ $ chmod +x start-p2pool.sh</code></p>

<p># Configure <code>crontab</code> file to execute <code>start-p2pool.sh</code> on reboot<br />
<code>pi@raspberrypi:~ $ crontab -u pi -e</code></p>

<pre><code># Edit this file to introduce tasks to be run by cron.
#
# Each task to run has to be defined through a single line
# indicating with different fields when the task will be run
# and what command to run for the task
#
# To define the time you can provide concrete values for
# minute (m), hour (h), day of month (dom), month (mon),
# and day of week (dow) or use '*' in these fields (for 'any').#
# Notice that tasks will be started based on the cron's system
# daemon's notion of time and timezones.
#
# Output of the crontab jobs (including errors) is sent through
# email to the user the crontab file belongs to (unless redirected).
#
# For example, you can run a backup of all your user accounts
# at 5 a.m every week with:
# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/
#
# For more information see the manual pages of crontab(5) and cron(8)
# m h  dom mon dow   command

@reboot vertcoind

# This is optional, this can cause for an annoying execution of a resource heavy 
# application on load while troubleshooting an issue. Just be mindful that crontab
# is setup this way if you choose to use it. Uncomment line to enable.
#@hourly vertcoind

# sleep 2 minutes then start p2pool, allow for vertcoin blockchain to load first
@reboot sleep 120; /home/pi/start-p2pool.sh
</code></pre>

<p><code>Merged Mining P2Pool Note:</code> Running P2Pool 10 minutes after reboot allows the Raspberry Pi resources and time to verify, load the <code>vertcoin</code> blockchain, <code>unitus</code> blockchain and catch up if needed.</p>

<h4 id="start-p2pool-vtc">Start p2pool-vtc</h4>

<p># Change directories to <code>p2pool-vtc/</code><br />
<code>pi@raspberrypi:~ $ cd p2pool-vtc</code></p>

<blockquote>
<p>If you are a smaller miner with 2 graphics cards or less or are using your CPU, it is recommended to use Network 2. If you are a larger miner with multiple cards and/or a hash rate larger than 100Mh, it is recommended to use Network 1.</p>
</blockquote>

<p>Network 1: <code>--net vertcoin</code><br />
Network 2: <code>--net vertcoin2</code></p>

<p># Launch <code>p2pool</code> without merged mining, ignore the hangup signal and keep running<br />
<code>pi@raspberrypi:~/p2pool-vtc $ nohup python run_p2pool.py --net vertcoin2 -a yourlegacyvertcoinaddressgoeshere --max-conns 8 --outgoing-conns 4 &amp;</code></p>

<p># Display output of P2Pool&rsquo;s <code>debug</code> log; <code>ctrl+c</code> to stop</p>

<p>Network 1:<br />
<code>pi@raspberrypi:~ $ tailf p2pool-vtc/data/vertcoin/log</code></p>

<p>Network 2:<br />
<code>pi@raspberrypi:~ $ tailf p2pool-vtc/data/vertcoin2/log</code></p>

<hr />

<h3 id="experimental-setup-unitus-full-node-for-merged-mining-with-p2pool-vtc"><code>**EXPERIMENTAL</code> Setup Unitus Full Node for merged mining with p2pool-vtc</h3>

<p><code>NOTE:</code> This has proven to be an unstable experience, this section is experimental and is only for those who wish to experimental with their Raspberry Pi and are comfortable with troubleshooting their node and possibly breaking their node.</p>

<p>A <code>Unitus</code> full node may be setup to allow for merged mining rewards when mining with <code>p2pool-vtc</code>. Running two full nodes together on the same Raspberry Pi will mean that you will be storing two blockchains on your USB Flash Drive rather than one, and you will be using more resources on load and at idle.</p>

<p>This step is <code>optional</code> but recommended. <a href="https://github.com/unitusdev/unitus/releases">Download</a> the latest stable release of Unitus Core and launch <code>unitus-qt.exe</code> on your Windows machine to begin the syncing process. I use my desktop PC to sync the blockchain first because it has better specs than a $35 Raspberry Pi. The PC will sync headers, download blocks and verify blocks faster than the Raspberry Pi can.</p>

<p>We will use this copy of the blockchain that is syncing to side-load onto our Raspberry Pi later.</p>

<p># Download latest <code>armhf</code> release of <code>unitus</code> and move binaries to <code>/usr/bin</code></p>

<pre><code>pi@raspberrypi:~ $ wget https://github.com/unitusdev/unitus/releases/download/0.14.2.2/unitus-0.14.2.2-armhf.tar.xz
pi@raspberrypi:~ $ tar xf unitus-0.14.2.2-armhf.tar.xz
pi@raspberrypi:~ $ chmod +x unitusd unitus-cli unitus-tx
pi@raspberrypi:~ $ sudo mv unitusd unitus-cli unitus-tx /usr/bin
</code></pre>

<p># Clean up<br />
<code>pi@raspberrypi:~ $ rm *</code></p>

<p># Change directory to <code>/mnt/</code><br />
<code>pi@raspberrypi:~ $ cd /mnt/</code></p>

<p># Create a directory for Unitus Core<br />
<code>pi@raspberrypi:/mnt $ mkdir unitus</code></p>

<p># Change to the <code>unitus</code> directory<br />
<code>pi@raspberrypi:/mnt $ cd unitus</code></p>

<p># Create <code>unitus.conf</code> for Unitus Core<br />
<code>pi@raspberrypi:/mnt/vertcoin $ nano unitus.conf</code></p>

<pre><code># merged mining values documentation
# https://cdn.discordapp.com/attachments/370500771168518155/415547042807676929/Merged-Mining_Guide.pdf
server=1
rpcuser=unitusnode
rpcpassword=yoursecurepasswordgoeshere
rpcport=6699
rpcallowip=127.0.0.1
algo=lyra2re2

# makes client run in background
daemon=1

# https://jlopp.github.io/bitcoin-core-config-generator/ lopp.net optimizations
dbcache=100
maxorphantx=10
maxmempool=50
maxconnections=15
maxuploadtarget=5000
</code></pre>

<blockquote>
<p>The more connections, the faster your node is notified of new blocks and avoids wasting work, and the faster it can include transactions with fees in the coinbase, the faster it will propagate a P2Pool block minimizing chances it would become orphan. The less connections, the less bandwidth used and the lower the latency. <code>[4]</code></p>
</blockquote>

<p><code>ctrl+x</code> to save</p>

<p><code>*OPTIONAL: A quick and easy way to generate a random password is taking the md5sum of a file</code></p>

<pre><code>pi@raspberrypi:/mnt/unitus $ touch randomfilename
pi@raspberrypi:/mnt/unitus $ md5sum randomfilename
d41d8cd98f00b204e9800998ecf8427e  randomfilename

# Clean up 
pi@raspberrypi:/mnt/unitus $ rm randomfilename
</code></pre>

<p># Change directory back home</p>

<pre><code>pi@raspberrypi:/mnt/unitus $ cd
pi@raspberrypi:~ $ pwd
/home/pi
</code></pre>

<p># Create soft link (symbolic link) connecting <code>/mnt/unitus/</code> &lt;&mdash;&gt; <code>/home/pi/.unitus</code><br />
<code>pi@raspberrypi:~ $ sudo ln -s /mnt/unitus/ /home/pi/.unitus</code></p>

<p># List all files in home</p>

<pre><code>pi@raspberrypi:~ $ ls -a
.   .bash_history  .bashrc  db-4.8.30.NC         .nano     .selected_editor  .vertcoin
..  .bash_logout   .config  db-4.8.30.NC.tar.gz  .profile  .unitus           .wget-hsts
</code></pre>

<p># List files in <code>/home/pi/.unitus</code>, confirm our configuration file <code>unitus.conf</code> is there</p>

<pre><code>pi@raspberrypi:~ $ ls .unitus
unitus.conf
</code></pre>

<p># Transfer <code>Unitus</code> Blockchain to USB Flash Drive</p>

<p>When <code>Unitus Core</code> is finished syncing to the blockchain, exit <code>Unitus Core</code> so that it safely shuts down ensuring no data is corrupted.</p>

<p>Proceed by running <code>WinSCP</code>, you will be met with a <code>Login</code> prompt asking for a Host name, Port number, User name and Password. Login to your Raspberry Pi like so, please note that your Raspberry Pi&rsquo;s <code>IP</code> address may be different than what is listed below.</p>

<pre><code>File protocol: SFTP
Host name: 192.168.1.2
Port number: 22
User name: pi
Password: yourpasswordhere (default: raspberry)
</code></pre>

<p><code>Default Windows Directory (Unitus): C:\Users\%USER%\AppData\Roaming\Unitus</code></p>

<p>Transfer the folders <code>blocks</code> and <code>chainstate</code> to the <code>unitus</code> folder <code>/mnt/unitus/</code> on your USB Flash Drive. This will allow us to side-load the Unitus blockchain and bootstrap faster than if we had the Raspberry Pi do all the work.</p>

<p># Edit <code>crontab</code> file to start Unitus hourly and on reboot to ensure the process is alive<br />
Here we will configure the crontab file to start vertcoind as a daemon on reboot and on each hour to ensure vertcoind always has a process thats alive. If vertcoind is already running when the hourly crontab executes it will simply fail to spawn a new process.</p>

<p># Configure crontab file to start <code>unitusd</code> hourly and on reboot<br />
<code>pi@raspberrypi:~ $ crontab -u pi -e</code></p>

<pre><code># Edit this file to introduce tasks to be run by cron.
#
# Each task to run has to be defined through a single line
# indicating with different fields when the task will be run
# and what command to run for the task
#
# To define the time you can provide concrete values for
# minute (m), hour (h), day of month (dom), month (mon),
# and day of week (dow) or use '*' in these fields (for 'any').#
# Notice that tasks will be started based on the cron's system
# daemon's notion of time and timezones.
#
# Output of the crontab jobs (including errors) is sent through
# email to the user the crontab file belongs to (unless redirected).
#
# For example, you can run a backup of all your user accounts
# at 5 a.m every week with:
# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/
#
# For more information see the manual pages of crontab(5) and cron(8)
#
# m h  dom mon dow   command

@reboot vertcoind
@reboot unitusd

# This is optional, this can cause for an annoying execution of a resource heavy 
# application on load while troubleshooting an issue. Just be mindful that crontab
# is setup this way if you choose to use it. Uncomment line to enable.
#@hourly vertcoind
#@hourly unitusd


</code></pre>

<p><code>ctrl+x</code> to save</p>

<p># Clean up<br />
<code>pi@raspberrypi:~ $ sudo rm *</code></p>

<p># <code>NOTE:</code> Make sure the blockchain has fully tansfered to <code>/mnt/unitus</code> before starting <code>unitusd</code></p>

<p># Start the <code>unitus</code> daemon and start blockchain sync<br />
<code>pi@raspberrypi:~ $ unitusd &amp;</code></p>

<p># You can monitor resource usage with <code>htop</code><br />
<code>pi@raspberrypi:~ $ htop</code></p>

<p># Monitor the <code>debug.log</code> of <code>unitusd</code> to troubleshoot the <code>unitusd</code> process if needed.<br />
<code>pi@raspberrypi:~ $ tailf .unitus/debug.log</code></p>

<p><code>ctrl+c</code> to stop</p>

<p># Configure firewall to allow <code>unitus</code> traffic</p>

<p># Escalate to <code>root</code> and configure <code>UFW</code><br />
<code>pi@raspberrypi:~ $ sudo su</code><br />
<code>root@raspberrypi:/home/pi# ufw allow 50603 comment 'allow unitus core'</code><br />
<code>root@raspberrypi:/home/pi# ufw enable</code><br />
<code>root@raspberrypi:/home/pi# ufw status</code></p>

<pre><code>Status: active

To                         Action      From
--                         ------      ----
22                         ALLOW       192.168.1.0/24             # allow SSH from local LAN
5889                       ALLOW       Anywhere                   # allow vertcoin core
50603                      ALLOW       Anywhere                   # allow unitus core
5889 (v6)                  ALLOW       Anywhere (v6)              # allow vertcoin core
50603 (v6)                 ALLOW       Anywhere (v6)              # allow unitus core
</code></pre>

<p># Give up <code>root</code><br />
<code>root@raspberrypi:/home/pi# exit</code></p>

<p>Open a browser window and navigate to your router page, from there you can port forward your Raspberry Pi.<br />
<code>TCP/UDP Port: 50603</code></p>

<p>This will make your node public, supporting the health of the Unitus network by keeping it decentralized and populated with one more node.</p>

<p># Launch <code>p2pool</code> with merged mining<br />
<code>nohup python run_p2pool.py --net vertcoin -a yourvertcoinaddressgoeshere --merged http://unitusnode:yourreallysecureRPCpasswordhere@127.0.0.1:6699 &amp;</code></p>

<p><code>NOTE:</code> Wait until p2pool is caught up to about <sup>1</sup>&frasl;<sub>3</sub> of the shares on the p2pool network before trying to mine or you will recieve stratum timeouts. If the <code>unitusd</code> daemon is not fully synced you will not be able to properly merge mine.</p>

<pre><code>pi@raspberrypi:~ $ unitus-cli getblockchaininfo
{
  &quot;chain&quot;: &quot;main&quot;,
  &quot;blocks&quot;: 1393285,
  &quot;headers&quot;: 1393285,
  &quot;bestblockhash&quot;: &quot;9b4fcc8482e164e7a9a60b5f24ea1532662919634cd8dd9effeadd656b5bb24a&quot;,
  &quot;difficulty&quot;: 47777.40182882061,
  &quot;difficulty_lyra2re2&quot;: 47777.40182882061,
  &quot;difficulty_skein&quot;: 190247.1287273991,
  &quot;difficulty_argon2d&quot;: 0.06362806683689816,
  &quot;difficulty_yescrypt&quot;: 0.9089585153746931,
  &quot;difficulty_x11&quot;: 18000603.30642917,
  &quot;mediantime&quot;: 1525309320,
  &quot;verificationprogress&quot;: 0.9999996620202053,
  &quot;chainwork&quot;: &quot;13b350000000000000000000000000000000000000000010d37b576f4191dc2a&quot;,
  &quot;pruned&quot;: false,
  &quot;softforks&quot;: [
    {
      &quot;id&quot;: &quot;bip34, bip65, bip66&quot;,
      &quot;version&quot;: 4,
      &quot;enforce&quot;: {
        &quot;status&quot;: false,
        &quot;found&quot;: 539,
        &quot;required&quot;: 850,
        &quot;window&quot;: 1000
      },
      &quot;reject&quot;: {
        &quot;status&quot;: false,
        &quot;found&quot;: 539,
        &quot;required&quot;: 900,
        &quot;window&quot;: 1000
      }
    }
  ],
  &quot;bip9_softforks&quot;: {
  }
}
pi@raspberrypi:~ $ unitus-cli getconnectioncount
14
</code></pre>

<h2 id="references">References</h2>

<p><code>[1] How to Create Your Own Bitcoin Full Node With a Raspberry Pi http://www.raspberrypifullnode.com/</code><br />
<code>[2] Jameson Lopp - Bitcoin Nodes, how many is enough? https://medium.com/@lopp/bitcoin-nodes-how-many-is-enough-9b8e8f6fd2cf</code><br />
<code>[3] Bitcoin Wiki - P2Pool https://en.bitcoin.it/wiki/P2Pool</code><br />
<code>[4] A guide for mining efficiently on P2Pool, includes FUD repellent and FAQ - https://bitcointalk.org/index.php?topic=153232.0</code></p>


    
    </div>
    </div>
</main>
  <footer></footer>


  <script src="/js/kube.js" type="text/javascript">
  </script>
  <script src="/js/kube.legenda.js" type="text/javascript">
  </script>
  <script src="/js/master.js" type="text/javascript">
  </script>
</body>

</html>
